{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://unpkg.com/@oai2lmapi/opencode-provider/oai2lm.schema.json",
  "title": "OAI2LM OpenCode Plugin Config (oai2lm.json)",
  "description": "Configuration file for @oai2lmapi/opencode-provider OpenCode plugin. Auto-discovers models from OpenAI-compatible APIs.",
  "type": "object",
  "additionalProperties": false,
  "required": ["baseURL"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference."
    },
    "baseURL": {
      "type": "string",
      "description": "Base URL for API calls (required). Example: https://api.example.com/v1",
      "minLength": 1
    },
    "apiKey": {
      "type": "string",
      "description": "API key for authentication. Supports {env:VAR} and {file:path} syntax. Falls back to OAI2LM_API_KEY env var.",
      "minLength": 1
    },
    "name": {
      "type": "string",
      "description": "Provider ID used in OpenCode model selection (defaults to 'oai2lm').",
      "minLength": 1
    },
    "displayName": {
      "type": "string",
      "description": "Display name shown in OpenCode UI.",
      "minLength": 1
    },
    "headers": {
      "type": "object",
      "description": "Custom headers applied to all requests.",
      "additionalProperties": {
        "type": "string"
      }
    },
    "modelFilter": {
      "type": "string",
      "description": "Wildcard pattern to filter models. Only matching models are registered."
    },
    "modelOverrides": {
      "type": "object",
      "description": "Per-model configuration overrides keyed by wildcard patterns (* and ?).",
      "additionalProperties": {
        "$ref": "#/$defs/modelOverride"
      }
    }
  },
  "$defs": {
    "thinkingLevel": {
      "oneOf": [
        {
          "type": "string",
          "enum": ["none", "low", "medium", "high", "auto"],
          "description": "Preset thinking level for chain-of-thought reasoning."
        },
        {
          "type": "number",
          "description": "Explicit token budget for thinking.",
          "minimum": 0
        }
      ]
    },
    "modelOverride": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "maxInputTokens": {
          "type": "number",
          "description": "Override maximum input tokens.",
          "minimum": 1
        },
        "maxOutputTokens": {
          "type": "number",
          "description": "Override maximum output tokens.",
          "minimum": 1
        },
        "supportsToolCalling": {
          "type": "boolean",
          "description": "Override whether the model supports native tool/function calling."
        },
        "supportsImageInput": {
          "type": "boolean",
          "description": "Override whether the model supports image inputs."
        },
        "temperature": {
          "type": "number",
          "description": "Default temperature for this model (0.0-2.0).",
          "minimum": 0,
          "maximum": 2
        },
        "thinkingLevel": {
          "$ref": "#/$defs/thinkingLevel",
          "description": "Thinking level for chain-of-thought reasoning. 'none'/'low'/'medium'/'high'/'auto' or explicit token budget."
        },
        "suppressChainOfThought": {
          "type": "boolean",
          "description": "Suppress chain-of-thought output in the response."
        },
        "usePromptBasedToolCalling": {
          "type": "boolean",
          "description": "Use XML-based tool calling in system prompt instead of native function calling."
        },
        "trimXmlToolParameterWhitespace": {
          "type": "boolean",
          "description": "Trim whitespace from XML tool parameter values (only when usePromptBasedToolCalling is true)."
        },
        "parseThinkingTags": {
          "type": "boolean",
          "description": "Parse <think> and <thinking> tags from model output and convert to reasoning content. Useful for models that output thinking in XML tags (e.g., DeepSeek, QwQ)."
        }
      }
    }
  }
}
